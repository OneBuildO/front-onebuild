<div [@pageTransition] class="min-h-screen bg-slate-50 flex justify-center items-center ">
  <div class="card p-5 w-10/12 lg:w-1/3 md:w-10/12">
    <div class="relative flex flex-col p-1 md:p-8">
      <div class="flex flex-col items-center justify-center">
        <h2 class="text-lg pb-2">
          Redefina sua senha
        </h2>

        <p class="text-xs">Informe seu email</p>
        <p class="text-xs">Enviaremos um link para que você redefina sua senha</p>
      </div>

      <app-alert
        (hideAlert)="onAlertCloseHandler($event)"
        [dismissible]="true"
        [messages]="serverMessages"
        [show]="serverMessages.length > 0"
        [type]="tipoAlerta"
      ></app-alert>


      <!--      ENVIO EMAIL -->
      <form *ngIf="!isEmailEnviado" class="my-5" [formGroup]="emailForm" (ngSubmit)="onFormSubmitHandler($event)">
        <div class="form-group">
          <label for="email">Email*</label>
          <div class="relative">
            <input type="email" id="email" class="form-control w-full ps-10" formControlName="username"
                   placeholder="informe seu email">
            <span class="absolute top-2 left-0 ps-3 text-gray-400">
                            <i class="bi bi-envelope-at"></i>
                        </span>
          </div>
          <validation-error
            [submited]="submited"
            [valueValidation]="emailForm.get('email')?.value?.toString()"
          ></validation-error>
        </div>
        <button type="submit" class="btn w-full bg-amber-600" [disabled]="isLoading">
          <btn-spinner *ngIf="isLoading" [show]="isLoading"></btn-spinner>
          <span class="text-branco" [ngClass]="{'translate-x-0.5': isLoading}">
              Confirmar
          </span>
        </button>
      </form>

      <form *ngIf="isEmailEnviado" class="my-5" [formGroup]="passwordForm" (ngSubmit)="onFormSubmitHandler($event)">
        <div class="form-group">
          <label for="email">Email*</label>
        </div>
          <div class="form-group">
              <label for="password">Senha*</label>
              <div class="relative">
                  <input type="password" id="password" class="form-control w-full ps-10"
                      formControlName="password" placeholder="informe sua senha">
                  <span class="absolute top-2 left-0 ps-3 text-gray-400">
                      <i class="bi bi-shield-lock"></i>
                  </span>
              </div>
              <validation-error
                  [submited]="submited"
                  [valueValidation]="passwordForm.get('password')?.value?.toString()"
              ></validation-error>
          </div>

        <button type="submit" class="btn w-full bg-amber-600" [disabled]="isLoading">
          <btn-spinner *ngIf="isLoading" [show]="isLoading"></btn-spinner>
          <span class="text-branco" [ngClass]="{'translate-x-0.5': isLoading}">
                        Confirmar
                    </span>
        </button>
      </form>

      <div class="text-sm text-gray-400">
        <p>
          Já possui uma conta? Faça
          <a [routerLink]="commonService.prepareRoute(publicRoutes.Login)" class="text-amber-600">
            Login
          </a>
          agora
        </p>
      </div>
    </div>
  </div>
</div>
