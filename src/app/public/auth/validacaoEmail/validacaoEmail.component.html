<div [@pageTransition] class="min-h-screen bg-slate-50 flex justify-center items-center ">
  <div class="card p-5 w-10/12 lg:w-1/3 md:w-10/12">
    <div class="relative flex flex-col p-1 md:p-8">
      <div class="flex flex-col items-center justify-center">
        <h2 class="text-lg pb-2">
          Validação de email
        </h2>

        <p class="text-xs">Informe o código que enviamos para seu email</p>
      </div>

      <app-alert
        (hideAlert)="onAlertCloseHandler($event)"
        [dismissible]="true"
        [messages]="serverMessages"
        [show]="serverMessages.length > 0"
        [type]="tipoAlerta"
      ></app-alert>

      <form class="my-5" [formGroup]="codeForm" (ngSubmit)="onFormSubmitHandler($event)">
        <div class="form-group">
          <label for="code">Código*</label>
          <div class="relative">
            <input type="text" id="code" class="form-control w-full ps-10" formControlName="code"
                   placeholder="informe o código enviado para seu email">
            <span class="absolute top-2 left-0 ps-3 text-gray-400">
                <i class="bi bi-file-lock"></i>
            </span>
          </div>
          <validation-error
            [submited]="submited"
            [valueValidation]="codeForm.get('code')?.value?.toString()"
          ></validation-error>
        </div>

        <button type="submit" class="btn w-full bg-amber-600" [disabled]="isLoading">
          <btn-spinner *ngIf="isLoading" [show]="isLoading"></btn-spinner>
          <span class="text-branco" [ngClass]="{'translate-x-0.5': isLoading}">
              Validar email
          </span>
        </button>
      </form>

      <div class="flex justify-center">
        <span *ngIf="!isLiberadoNovaSolicitacao" class="text-sm text-gray-400">Reenviar código em: {{ codeTimeRemain }}</span>
        <button  *ngIf="isLiberadoNovaSolicitacao" type="button" class="btn btn-outline-warning me-2" (click)="handleSendCode()">
          Reenviar código
        </button>
      </div>

      <div class="text-sm text-gray-400 mt-12">
        <p>
          Já possui uma conta? Faça
          <a [routerLink]="commonService.prepareRoute(publicRoutes.Login)" class="text-amber-600">
            Login
          </a>
          agora
        </p>
      </div>
    </div>
  </div>
</div>
